(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{1425:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(7876),l=s(4232),r=s(6064),n=s(3311),i=s(2009),d=s(3097);let o=[5,10,25,50,100];function c(){let{currentUser:e}=(0,r.A)(),[t,s]=(0,l.useState)(0),[c,x]=(0,l.useState)(!1),[m,u]=(0,l.useState)(0),[f,h]=(0,l.useState)(!1),p=e?"https://rewmo.ai/?ref=".concat(e.uid):"";(0,l.useEffect)(()=>{!async function(){if(e){let t=(await (0,i.x7)((0,i.H9)(n.db,"users",e.uid))).data()||{};s(t.referralCount||0),u(t.points||0)}}()},[e]),(0,l.useEffect)(()=>{o.includes(t)&&(x(!0),setTimeout(()=>x(!1),3e3))},[t]);let b=async()=>{await navigator.clipboard.writeText(p),h(!0),setTimeout(()=>h(!1),1800)},g=async()=>{var t,a;if(!e)return;let l=(0,i.H9)(n.db,"users",e.uid);await (0,i.c4)(n.db,async e=>{var t,s;let a=await e.get(l);if(!a.exists())return;let r=((null==(t=a.data())?void 0:t.referralCount)||0)+1,n=0;o.includes(r)&&(n=1e3),e.update(l,{referralCount:r,...n?{points:((null==(s=a.data())?void 0:s.points)||0)+n}:{},lastReferral:(0,i.O5)()})});let r=await (0,i.x7)(l);s((null==(t=r.data())?void 0:t.referralCount)||0),u((null==(a=r.data())?void 0:a.points)||0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("main",{className:"min-h-screen bg-black text-white flex flex-col items-center px-3 pb-16 pt-8",children:[(0,a.jsx)("img",{src:"/logos/logo.png",alt:"RewmoAI Logo",className:"h-12 mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-3 text-orange-400",children:"Profile & Referrals"}),e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-full max-w-md mb-5",children:(0,a.jsxs)("div",{className:"bg-gray-900/60 p-4 rounded-xl shadow text-center",children:[(0,a.jsxs)("div",{className:"text-base mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-gray-200",children:"Welcome,"})," ",(0,a.jsx)("span",{className:"font-semibold text-orange-400",children:e.email})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["User ID: ",e.uid]})]})}),(0,a.jsxs)("div",{className:"w-full max-w-md mb-4 bg-orange-50/90 p-4 rounded-xl shadow text-center",children:[(0,a.jsx)("h3",{className:"font-bold text-orange-700 mb-2",children:"Invite Friends & Earn Rewards"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-2 justify-center",children:[(0,a.jsx)("input",{value:p,readOnly:!0,className:"w-full max-w-xs px-2 py-1 rounded border border-gray-300 text-sm bg-gray-100 text-gray-700"}),(0,a.jsx)("button",{onClick:b,className:"ml-0 md:ml-2 mt-2 md:mt-0 px-3 py-1 bg-orange-500 text-white rounded hover:bg-orange-600 text-sm",children:f?"Copied!":"Copy"})]}),(0,a.jsx)("p",{className:"text-xs mt-2 text-gray-500",children:"Share your link. Earn bonus points for each friend who joins!"})]}),(0,a.jsxs)("div",{className:"mb-6 w-full max-w-md text-center",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row items-center justify-center",children:[(0,a.jsxs)("span",{className:"text-base font-semibold text-orange-500",children:["Referrals: ",t]}),(0,a.jsxs)("span",{className:"text-base font-semibold text-orange-300 md:ml-8",children:["Reward Points: ",m]})]}),c&&(0,a.jsxs)("div",{className:"mt-3 px-4 py-2 rounded bg-green-200 text-green-800 font-semibold text-sm animate-bounce",children:["\uD83C\uDF89 Bonus Unlocked! +",1e3," Points!"]})]}),(0,a.jsxs)("div",{className:"w-full max-w-md text-center",children:[(0,a.jsx)("button",{className:"px-4 py-1 rounded bg-blue-600 text-white text-sm mb-2",onClick:g,children:"Simulate Referral (for testing)"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:(0,a.jsx)("em",{children:"Remove this button in production!"})})]})]}),!e&&(0,a.jsx)("div",{className:"bg-red-100 text-red-700 px-6 py-3 rounded-lg mt-10",children:"Please sign in to view your profile and referral rewards."})]}),(0,a.jsx)(d.A,{})]})}},3097:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(7876),l=s(8230),r=s.n(l),n=s(9099);let i=[{label:"Home",path:"/"},{label:"Features",path:"/features"},{label:"Rewards",path:"/rewards"},{label:"Shopping",path:"/shopping"},{label:"Profile",path:"/profile"}];function d(){let e=(0,n.useRouter)();return(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-40 bg-black border-t border-gray-800 flex justify-around items-center py-2 shadow-lg md:hidden",children:i.map(t=>(0,a.jsx)(r(),{href:t.path,children:(0,a.jsx)("span",{className:"flex flex-col items-center text-xs ".concat(e.pathname===t.path?"text-orange-500 font-semibold":"text-gray-300"),children:t.label})},t.path))})}},8172:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(1425)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(8172)),_N_E=e.O()}]);