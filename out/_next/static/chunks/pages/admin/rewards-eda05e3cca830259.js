(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{4444:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/rewards",function(){return t(6722)}])},6722:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var a=t(7876),s=t(4232),n=t(2009),d=t(3311);function c(){let[e,r]=(0,s.useState)([]),[t,c]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{!async function(){try{let e=await (0,n.GG)((0,n.Cs)(d.db,"rewards")),t=[];e.forEach(e=>{var r,a,s;let n=e.data(),d=(null==(r=e.ref.parent.parent)?void 0:r.id)||"unknown";t.push({id:e.id,userId:d,points:null!=(a=n.points)?a:0,type:null!=(s=n.type)?s:"Other",createdAt:n.createdAt?new Date(1e3*n.createdAt.seconds).toLocaleString():""})}),r(t)}catch(e){alert("Error loading rewards: "+e.message)}finally{c(!1)}}()},[]),(0,a.jsxs)("main",{className:"max-w-5xl mx-auto py-10 px-4 bg-white text-gray-900 min-h-screen",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-8 text-orange-600",children:"All User Rewards (Admin)"}),t?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading rewards..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:function(){let r=new Blob(["Reward ID,User ID,Points,Type,Created At\n"+e.map(e=>"".concat(e.id,",").concat(e.userId,",").concat(e.points,",").concat(e.type,',"').concat(e.createdAt.replace(/"/g,""),'"')).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(r),a=document.createElement("a");a.href=t,a.download="rewmoai-rewards.csv",a.click(),window.URL.revokeObjectURL(t)},className:"mb-4 px-5 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition",children:"Export All as CSV"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-orange-100 text-gray-900",children:[(0,a.jsx)("th",{className:"py-2 px-3 border",children:"Reward ID"}),(0,a.jsx)("th",{className:"py-2 px-3 border",children:"User ID"}),(0,a.jsx)("th",{className:"py-2 px-3 border",children:"Points"}),(0,a.jsx)("th",{className:"py-2 px-3 border",children:"Type"}),(0,a.jsx)("th",{className:"py-2 px-3 border",children:"Created At"})]})}),(0,a.jsxs)("tbody",{children:[e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border px-2 py-1",children:e.id}),(0,a.jsx)("td",{className:"border px-2 py-1",children:e.userId}),(0,a.jsx)("td",{className:"border px-2 py-1",children:e.points}),(0,a.jsx)("td",{className:"border px-2 py-1",children:e.type}),(0,a.jsx)("td",{className:"border px-2 py-1",children:e.createdAt})]},e.id)),!e.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center text-gray-400 py-8",children:"No rewards found."})})]})]})})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(4444)),_N_E=e.O()}]);